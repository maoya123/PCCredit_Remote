#parse ("common/iframe_page_header.htm")
 <link rel="stylesheet" type="text/css" href="${uicasePath}/css/specialtab.css" />
<body class="whitebg">
	<div class="content_main">
		<div class="contentinner">
			<div class="place">
				<div class="title">客户经理业绩总进度修改</div>
			</div>
			<form id="id_module_form"
				action="${contextPath}/manager/performmance/performUpdate.json" />
			
				<table cellpadding="0" cellspacing="0" class="table-bd" border="1"
					bordercolor="#cccccc" style="width: 97%;margin-top:20px;margin-left:1.5%;">
					<colgroup>
						<col width="10%" />
						<col width="30%" />
						<col width="10%" />
						<col width="30%" />
					</colgroup>
					<tr>
						<td class="titlec" colspan="4" style="text-align: center;">进度修改</td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="changedate">指定日期:</label></td>
						 <td><input class="rinpsty" type="text" id ="changedate" name="changedate" onmouseover="_calendar()" readonly="readonly" /></td>
						<td class="titlefc3"><label for="manager_id_s">客户经理:</label></td>
						 <td><select  name="manager_id" id="manager_id_s" style="width: 200px;">
                  		#dict("MANAGERUSERS","")
                  		</select>
             			 </td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="visitcount_s">拜访数:</label></td>
						<td><input class="rinpsty" type="text" id="visitcount_s"
							name="visitcount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
						<td class="titlefc3"><label for="applycount_s">申请数:</label></td>
						<td><input class="rinpsty" type="text" id="applycount_s"
							name="applycount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="applyrefuse_s">申请拒绝数:</label></td>
						<td><input class="rinpsty" type="text" id="applyrefuse_s"
							name="applyrefuse" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
						<td class="titlefc3"><label for="creditcount_s">征信数:</label></td>
						<td><input class="rinpsty" type="text" id="creditcount_s"
							name="creditcount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="creditrefuse_s">征信拒绝数:</label></td>
						<td><input class="rinpsty" type="text" id="creditrefuse_s"
							name="creditrefuse" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}" /></td>
						<td class="titlefc3"><label for="realycount_s">实调数:</label></td>
						<td><input class="rinpsty" type="text" id="realycount_s"
							name="realycount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="reportcount_s">报告数:</label></td>
						<td><input class="rinpsty" type="text" id="reportcount_s"
							name="reportcount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
						<td class="titlefc3"><label for="internalcount_s">内审数:</label></td>
						<td><input class="rinpsty" type="text" id="internalcount_s"
							name="internalcount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="meetingcout_s">上会数:</label></td>
						<td><input class="rinpsty" type="text" id="meetingcout_s"
							name="meetingcout" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
						<td class="titlefc3"><label for="passcount_s">通过数:</label></td>
						<td><input class="rinpsty" type="text" id="passcount_s"
							name="passcount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
					</tr>
					<tr>
						<td class="titlefc3"><label for="signcount_s">签约数:</label></td>
						<td><input class="rinpsty" type="text" id="signcount_s"
							name="signcount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
						<td class="titlefc3"><label for="givemoneycount_s">放款数:</label></td>
						<td><input class="rinpsty" type="text" id="givemoneycount_s"
							name="givemoneycount" value="0" onfocus="if(value=='0'){value=''}"  onblur="if(value==''||!/^\d+$/.test(this.value)){value='0'}"/></td>
					</tr>
					
				</table>
			</form>
			<div class="submit" style="text-align: left;">
				<input id="id_save_button" type="button"
					value="#i18n('button.save')" class="current" />
					<input type="button" onclick="javascript:history.go(-1);" value="返回" />
			</div>
		</div>
	</div>
</body>
 <script type="text/javascript">
 $(document).ready(function() {	
	 #set ($formName = "'#id_module_form'");
	 $("#id_save_button").click(function (){
		 
		 var formjson = $($formName).serialize();
   	     var url = $($formName).attr("action");
		 $.ajax({
				url : url,
				type : "get",
				data : formjson,
				success : function(data) {
					if (data.success) {
						topWin.Dialog.message(data.mess);
	   	            	window.location.reload() ;
					}else{
						topWin.Dialog.message(data.mess);
				    }
				}
			});
	});
	
	 $("#manager_id_s").change(function(){
		 var managerId = $("#manager_id_s").val();
		 var changedate = $("#changedate").val();
		 if(changedate==null||changedate==""){
			 topWin.Dialog.message("请先选择修改日期！");
			 document.location.reload();
		 }else{
		 var url ="${contextPath}/manager/performmance/performsumselect.json"
		 $.ajax({
				url : url,
				type : "get",
				dataType:'json',
				data : {"managerId":managerId,"changedate":changedate},
				success : function(data) {
					if(data!="null"){
					var obj = jQuery.parseJSON(data);
					$("#visitcount_s").val(obj.visitcount);
					$("#applycount_s").val(obj.applycount);
					$("#applyrefuse_s").val(obj.applyrefuse);
					$("#creditcount_s").val(obj.creditcount);
					$("#creditrefuse_s").val(obj.creditrefuse);
					$("#realycount_s").val(obj.realycount);
					$("#reportcount_s").val(obj.reportcount);
					$("#internalcount_s").val(obj.internalcount);
					$("#meetingcout_s").val(obj.meetingcout);
					$("#passcount_s").val(obj.passcount);
					$("#signcount_s").val(obj.signcount);
					$("#givemoneycount_s").val(obj.givemoneycount);
					}else{
						$("#visitcount_s").val("0");
						$("#applycount_s").val("0");
						$("#applyrefuse_s").val("0");
						$("#creditcount_s").val("0");
						$("#creditrefuse_s").val("0");
						$("#realycount_s").val("0");
						$("#reportcount_s").val("0");
						$("#internalcount_s").val("0");
						$("#meetingcout_s").val("0");
						$("#passcount_s").val("0");
						$("#signcount_s").val("0");
						$("#givemoneycount_s").val("0");
					}
				}
			});
		 }
	 });
 })
 
 
 </script>
#parse ("common/iframe_page_footer.htm")
